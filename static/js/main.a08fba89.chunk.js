(this.webpackJsonppossum_new=this.webpackJsonppossum_new||[]).push([[0],{126:function(e,t,n){"use strict";n.r(t);var r,c=n(0),i=n.n(c),a=n(29),o=n.n(a),s=n(11),u=n.n(s),l=n(21),d=n(28),j=n(7),b=n(2),h=n(22),m=n.n(h),f=n(13),O="GET_CATEGORIES",p="SET_CATEGORY",x="SET_DELIVERY_CITY",g="SET_DELIVERY_INFO",v="SET_VK_PARAMS",y=function(e){return{type:O,payload:e}},k=(n(26),n(56)),w=n.n(k),S=n(57),C=n.n(S),_=n(1),P=function(e){var t=e.go,n=e.order;return Object(_.jsx)(b.k,{vertical:"top",children:Object(_.jsx)(b.g,{onClick:function(){return t("cart")},className:"cellCart",description:Object(_.jsx)("span",{style:{color:"#FFF"},children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0437\u0430\u043a\u0430\u0437\u0430\u0445"}),before:Object(_.jsx)("span",{style:{paddingRight:4,color:"antiquewhite"},children:Object(_.jsx)(w.a,{width:30,height:30,style:{float:"left",padding:2}})}),indicator:Object(_.jsxs)("span",{style:{color:"aliceblue"},children:[Object(_.jsx)(C.a,{style:{float:"right",padding:2},height:20,width:20}),n.meta.sum]}),children:Object(_.jsxs)(b.d,{style:{color:"antiquewhite"},level:"1",weight:"regular",children:["\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437: \u0442\u043e\u0432\u0430\u0440\u043e\u0432 - ",n.meta.count]})})})},E=n(24),z=n.n(E),I=n(33),T=n.n(I),D=n(34),A=n.n(D),F=n(35),M=n.n(F),R=n.p+"static/media/mess.d4d0a58c.png",N=n(16),V={31:{title:"\u0426\u0432\u0435\u0442"},35:{title:"\u0412\u0435\u0441",m:"\u0433\u0440"},42:{title:"\u0412\u043a\u0443\u0441"},43:{title:"\u0414\u0438\u0430\u043c\u0435\u0442\u0440",m:"\u0441\u043c"}},K=function(e){var t,n=null===(t=e.prices.items)||void 0===t?void 0:t.find((function(e){return null===e.quantity_from}));if(null===n||void 0===n?void 0:n.discount_price)return{price:n.discount_price,sale:"\u0421\u043a\u0438\u0434\u043a\u0430 ".concat(n.discount_value_percents,"%")};if(!n)throw Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0446\u0435\u043d\u044b");return{price:n.price,sale:null}},B=function(e){if(!e)return null;if(1===e.length){var t=K(e[0]);return Object(_.jsx)(b.s,{after:"".concat(t.price," \u0440\u0443\u0431 ").concat(t.sale?t.sale:""),style:{color:"#FFF"},before:null,children:"\u0426\u0435\u043d\u0430"})}return e.map((function(e){var t;return null===(t=e.properties)||void 0===t?void 0:t.map((function(t){if(!V[t.property_id]||"N"===e.item.available||!t.value)return null;var n=K(e);return Object(_.jsx)(b.s,{before:V[t.property_id].title,after:"".concat(n.price," \u0440\u0443\u0431 ").concat(n.sale?n.sale:""),style:{color:"#FFF"},children:t.value})}))}))},q=function(e){var t=e.setActiveItem,n=e.go,r=function(){var e=Object(f.c)((function(e){return e.categories})),t=Object(f.c)((function(e){return e.targetCategory})),n=Object(c.useState)(null),r=Object(j.a)(n,2),i=r[0],a=r[1],o=Object(c.useState)([]),s=Object(j.a)(o,2),b=s[0],h=s[1],m=Object(c.useMemo)((function(){if(t)return 0===b.length?(null===e||void 0===e?void 0:e.filter((function(e){return e.parent_id===t.id})).map((function(e){return String(e.id)})).join(","))+","+t.id:b.join(",")}),[b,t,e]);return Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://zoomagasin.ru/api/api.php?route=list&section_ids="+m);case 2:return t=e.sent,e.next=5,t.json();case 5:if((n=e.sent)&&n.items){e.next=8;break}return e.abrupt("return");case 8:"undefined"!==typeof n&&a(n.items.filter((function(e){return"Y"===e.available})));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[b,m]),{products:i,targetCat:t,categories:e,changeFilter:function(e){var t=Object(d.a)(b),n=t.indexOf(e);n>-1?t.splice(n,1):t.push(e),h(t)},fil:b}}(),i=r.products,a=r.categories,o=r.targetCat;return i&&a&&o?Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(b.f,{style:{marginTop:10},children:i.map((function(e){return e.elements&&!e.elements[0].prices.items?null:Object(_.jsxs)(b.e,{style:{paddingTop:8,borderRadius:13,margin:"0 0 20px 0",backgroundColor:"#007151",boxShadow:"inset 2px 2px 5px rgb(226 191 157 / 50%), 1px 1px 5px rgb(255 255 255)"},size:"l",mode:"shadow",children:[Object(_.jsxs)("div",{className:"flex",children:[Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{onClick:function(){t(e),n("aboutProduct")},style:{height:100,minWidth:100,margin:"10px 25px",backgroundImage:e.image_url?"url("+e.image_url+")":void 0,backgroundSize:"contain",backgroundPosition:"center 35%",backgroundRepeat:"no-repeat",borderRadius:13}}),Object(_.jsx)("div",{style:{padding:"0 10px"},children:Object(_.jsx)(b.c,{onClick:function(){t(e),n("aboutProduct")},size:"m",stretched:!0,mode:"overlay_secondary",children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"})})]}),Object(_.jsx)("div",{style:{margin:"10px 10px 0 0"},children:Object(_.jsx)(b.d,{level:"1",weight:"regular",children:e.detail.slice(0,180)})})]}),Object(_.jsx)(b.s,{textWrap:"full",before:null,children:Object(_.jsx)(b.D,{level:"1",weight:"regular",children:e.name})}),B(e.elements)]},e.id)}))})}):Object(_.jsx)(b.A,{})},U=function(){var e=Object(c.useState)(null),t=Object(j.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(JSON.parse(localStorage.getItem("new_possum_orders")||"null")||{items:{},meta:{sum:0,count:0,weight:0}}),a=Object(j.a)(i,2),o=a[0],s=a[1],d=function(e){var t,n=null===(t=e.elements)||void 0===t?void 0:t.find((function(e){return e.active}));return n&&null!==n.item?n.item.quantity:e.quantity},b=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,c,i,a,l,j,b,h,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(N.a)({},o),e.next=3,r.items[t.id].item.elements.forEach((function(e,t){e.active=t===n}));case 3:c=d(t),r.items[t.id].count>c&&(r.items[t.id].count=c),i=0,a=0,l=0,e.t0=u.a.keys(r.items);case 9:if((e.t1=e.t0()).done){e.next=21;break}if(j=e.t1.value,i+=r.items[j].count,b=r.items[j].item.elements.find((function(e){return e.active}))){e.next=16;break}throw Error("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u0442 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u0442\u043e\u0432\u0430\u0440\u0430");case 16:h=K(b),a+=r.items[j].count*h.price,l+=.7*r.items[j].count,e.next=9;break;case 21:r.meta={count:i,sum:a,weight:l},m=JSON.stringify(r),localStorage.setItem("new_possum_orders",m),s(r);case 25:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return{order:Object(c.useMemo)((function(){return o}),[o]),clearCart:function(){localStorage.setItem("new_possum_orders",JSON.stringify({items:{},meta:{sum:0,weight:0,count:0}}));s({items:{},meta:{sum:0,weight:0,count:0}})},message:n,onIncrementPosition:function(e){try{var t=Object(N.a)({},o);if(e.id in t.items){var n=d(e);if(t.items[e.id].count>=n)throw Error("\u041d\u0435\u043b\u044c\u0437\u044f \u0437\u0430\u043a\u0430\u0437\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 ".concat(n," \u0448\u0442\u0443\u043a(\u0438) \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0442\u043e\u0432\u0430\u0440\u0430"));t.items[e.id].count++}else{var c=0;if(e.elements.forEach((function(e){if((null===e.item||e.item&&"Y"===e.item.available)&&0===c)return e.active=!0,void c++;e.active=!1})),d(e)<1)throw Error("\u0421\u0435\u0439\u0447\u0430\u0441 \u0434\u0430\u043d\u043d\u044b\u0439 \u0442\u043e\u0432\u0430\u0440 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u043a \u043f\u043e\u043a\u0443\u043f\u043a\u0435");t.items[e.id]={item:e,count:1}}var i=0,a=0,u=0;for(var l in t.items){i+=t.items[l].count;var j=t.items[l].item.elements.find((function(e){return e.active}));if(!j)throw Error("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u0442 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u0442\u043e\u0432\u0430\u0440\u0430");var b=K(j);a+=t.items[l].count*b.price,u+=.7*t.items[e.id].count}t.meta={count:i,sum:a,weight:u};var h=JSON.stringify(t);localStorage.setItem("new_possum_orders",h),s(t)}catch(m){r(m)}},onDeletePosition:function(e){var t=Object(N.a)({},o);delete t.items[e.id];var n=0,r=0,c=0;for(var i in t.items){n+=t.items[i].count;var a=t.items[i].item.elements.find((function(e){return e.active}));if(!a)throw Error("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u0442 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u0442\u043e\u0432\u0430\u0440\u0430");var u=K(a);r+=t.items[i].count*u.price,c+=.7*t.items[i].count}t.meta={count:n,sum:r,weight:c};var l=JSON.stringify(t);localStorage.setItem("new_possum_orders",l),s(t)},changeElementVariant:b,onDecrementPosition:function(e){console.log("onDecrementPosition");var t=Object(N.a)({},o);e.id in t.items&&(1===t.items[e.id].count?delete t.items[e.id]:t.items[e.id].count--);var n=0,r=0,c=0;for(var i in t.items){n+=t.items[i].count;var a=t.items[i].item.elements.find((function(e){return e.active}));if(!a)throw Error("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u0442 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u0442\u043e\u0432\u0430\u0440\u0430");var u=K(a);r+=t.items[i].count*u.price,c+=.7*t.items[i].count}t.meta={count:n,sum:r,weight:c};var l=JSON.stringify(t);localStorage.setItem("new_possum_orders",l),s(t)}}},W=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.send("VKWebAppAddToCommunity",{}).then((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(e){switch(e){case 1:return"https://zoomagasin.ru/images/im-ej-logo.png";case 19:return"https://zoomagasin.ru/images/im-possum-logo.png";case 23:return"https://zoomagasin.ru/images/im-rept-logo.png";case 27:return"https://zoomagasin.ru/images/im-nasek-logo.png";default:return"https://zoomagasin.ru/images/im-drug-logo.png"}},L=function(e){var t=e.id,n=e.go,r=e.fetchedUser,c=U().order,i=Object(f.b)(),a=Object(f.c)((function(e){return e.categories}));return a?Object(_.jsxs)(b.t,{id:t,children:[Object(_.jsx)(b.u,{}),Object(_.jsx)(P,{go:n,order:c}),Object(_.jsx)(b.n,{style:{paddingTop:50},header:Object(_.jsx)(b.o,{mode:"secondary",children:"\u041f\u043e\u0447\u0435\u043c\u0443 \u043c\u044b?"}),children:Object(_.jsxs)(b.j,{children:[Object(_.jsx)(b.s,{before:Object(_.jsx)(z.a,{}),children:"\u0423 \u043d\u0430\u0441 \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0441\u0442\u044b"}),Object(_.jsx)(b.s,{textLevel:"primary",before:Object(_.jsx)(z.a,{}),children:"\u0411\u043e\u043b\u0435\u0435 5 \u043b\u0435\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u044b"}),Object(_.jsx)(b.s,{textLevel:"primary",before:Object(_.jsx)(z.a,{}),children:"\u0411\u043e\u043b\u0435\u0435 1 000 \u043f\u043e\u043a\u0443\u043f\u0430\u0442\u0435\u043b\u0435\u0439"}),Object(_.jsx)(b.s,{textLevel:"primary",before:Object(_.jsx)(z.a,{}),children:"\u0412\u0445\u043e\u0434\u0438\u043c \u0432 \u0430\u0441\u0441\u043e\u0446\u0438\u0430\u0446\u0438\u0438 \u0432\u0440\u0430\u0447\u0435\u0439"}),Object(_.jsx)(b.s,{textLevel:"primary",before:Object(_.jsx)(z.a,{}),children:"\u0421\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0435 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u043e"}),Object(_.jsx)(b.s,{textLevel:"primary",before:Object(_.jsx)(z.a,{}),children:"\u041a\u043e\u043d\u0442\u0440\u043e\u043b\u044c \u043a\u0430\u0447\u0435\u0441\u0442\u0432"})]})}),Object(_.jsx)(b.n,{header:Object(_.jsx)(b.o,{mode:"secondary",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"}),children:a.map((function(e){return null===e.parent_id&&Object(_.jsx)(b.b,{id:String(e.id),onClick:function(){i(function(e){return{type:p,payload:e}}(e)),n("category")},mode:"image",header:e.name,asideMode:"expand",subheader:e.description,background:Object(_.jsx)("div",{style:{backgroundColor:"#198662",backgroundImage:"url("+J(e.id)+")",backgroundPosition:"98% 95%",backgroundSize:50,backgroundRepeat:"no-repeat"}})},e.id)}))}),Object(_.jsxs)(b.n,{header:Object(_.jsx)(b.o,{mode:"secondary",children:"\u0415\u0441\u0442\u044c \u0432\u043e\u043f\u0440\u043e\u0441\u044b?"}),children:[Object(_.jsx)(b.s,{after:Object(_.jsx)("img",{width:40,height:22,src:R,alt:"Viber/WhatsApp"}),before:Object(_.jsx)(T.a,{fill:"#FFF",height:20,width:20}),children:Object(_.jsx)(b.r,{href:"tel:+79022954808",target:"_blank",children:"+7 (902) 294-48-08"})}),Object(_.jsx)(b.s,{before:Object(_.jsx)(A.a,{fill:"#FFF",height:20,width:20}),children:Object(_.jsx)(b.r,{href:"https://vk.com/zoomagasin",target:"_blank",children:"vk.com/zoomagasin"})}),Object(_.jsx)(b.s,{before:Object(_.jsx)(M.a,{fill:"#FFF",height:20,width:20}),children:Object(_.jsx)(b.r,{href:"https://zoomagasin.ru/",target:"_blank",children:"zoomagasin.ru"})}),Object(_.jsx)(b.b,{header:"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u0432 \u0412\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e",subheader:"\u0415\u0441\u043b\u0438 \u0412\u044b \u044f\u0432\u043b\u044f\u0435\u0442\u0435\u0441\u044c \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u043c \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u0430 \u0441 \u0442\u0435\u043c\u0430\u0442\u0438\u043a\u043e\u0439, \u0441\u0445\u043e\u0436\u0435\u0439 \u0441 \u0442\u0435\u043c\u0430\u0442\u0438\u043a\u043e\u0439 \u043d\u0430\u0448\u0435\u0433\u043e \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0430 - \u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 '\u0421\u0430\u0445\u0430\u0440\u043d\u044b\u0439 \u043f\u043e\u0441\u0441\u0443\u043c' \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0412\u0430\u0448\u0435\u0433\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u0430 \u0438\u043b\u0438 \u0433\u0440\u0443\u043f\u043f\u044b.",actions:Object(_.jsx)(b.c,{onClick:W,children:"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0432 \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e"})}),!r||199500866!==r.id&&15937415!==r.id?null:Object(_.jsx)(b.j,{children:Object(_.jsx)(b.c,{size:"l",mode:"outline",stretched:!0,onClick:function(){return n("adminOrders")},children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430\u043c\u0438"})}),Object(_.jsx)(b.l,{})]})]}):null},Y=(n(124),function(e){switch(e){case 1:return"https://zoomagasin.ru/images/im-ej-logo.png";case 19:return"https://zoomagasin.ru/images/im-possum-logo.png";case 23:return"https://zoomagasin.ru/images/im-rept-logo.png";case 27:return"https://zoomagasin.ru/images/im-nasek-logo.png";default:return"https://zoomagasin.ru/images/im-drug-logo.png"}}),G=function(e){var t=e.id,n=e.go,r=e.setActiveProduct,i=Object(c.useState)(null),a=Object(j.a)(i,2),o=a[0],s=a[1],u=U(),l=u.message,d=u.order;Object(c.useEffect)((function(){l&&s(Object(_.jsx)(b.z,{layout:"vertical",onClose:function(){return s(null)},children:l}))}),[l]);var h=Object(f.c)((function(e){return e.targetCategory}));return h?Object(_.jsxs)(b.t,{id:t,children:[Object(_.jsx)(b.u,{left:Object(_.jsx)(b.v,{onClick:function(){return n("home")}})}),Object(_.jsx)(P,{go:n,order:d}),Object(_.jsxs)(b.w,{icon:Object(_.jsx)("div",{style:{marginTop:50,background:"url("+Y(h.id)+") no-repeat",height:50,width:50}}),children:["\u0412\u044b\u0431\u0440\u0430\u043d\u0430 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f: ",h.name]}),Object(_.jsx)(b.j,{children:Object(_.jsx)(q,{setActiveItem:r,go:n})}),Object(_.jsxs)(b.n,{header:Object(_.jsx)(b.o,{mode:"secondary",children:"\u0415\u0441\u0442\u044c \u0432\u043e\u043f\u0440\u043e\u0441\u044b?"}),children:[Object(_.jsx)(b.s,{after:Object(_.jsx)("img",{width:40,height:22,src:R,alt:"Viber/WhatsApp"}),before:Object(_.jsx)(T.a,{height:20,width:20}),children:Object(_.jsx)(b.r,{href:"tel:+79022954808",target:"_blank",children:"+7 (902) 294-48-08"})}),Object(_.jsx)(b.s,{before:Object(_.jsx)(A.a,{height:20,width:20}),children:Object(_.jsx)(b.r,{href:"https://vk.com/zoomagasin",target:"_blank",children:"vk.com/zoomagasin"})}),Object(_.jsx)(b.s,{before:Object(_.jsx)(M.a,{height:20,width:20}),children:Object(_.jsx)(b.r,{href:"https://zoomagasin.ru/",target:"_blank",children:"zoomagasin.ru"})}),Object(_.jsx)(b.l,{})]}),o]}):null},Z=n(58),H=n.n(Z),Q=function(e){var t=e.order,n=e.changeElementVariant,r=e.onIncrementPosition,c=e.onDecrementPosition,a=e.onDeletePosition,o=[],s=function(e,r){return 1===e.length?null:e.map((function(e,c){var i;return null===(i=e.properties)||void 0===i?void 0:i.map((function(i){return V[i.property_id]&&"N"!==e.item.available&&i.value?Object(_.jsx)("button",{onClick:function(){return n(t.items[r].item,c)},style:{color:e.active?"#41ca41":"#000",float:"left",margin:"auto"},children:i.value}):null}))}))},u=function(e){var n=function(e){var t,n,r=e.find((function(e){return!0===e.active})),c=null===r||void 0===r||null===(t=r.prices)||void 0===t||null===(n=t.items)||void 0===n?void 0:n.find((function(e){return null===e.quantity_from}));if(!c)throw Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0446\u0435\u043d\u044b");return c.discount_price?{price:c.discount_price,sale:"".concat(c.discount_value_percents,"%")}:{price:c.price,sale:null}}(t.items[e].item.elements);o.push(Object(_.jsxs)(i.a.Fragment,{children:[Object(_.jsx)(b.b,{before:Object(_.jsx)(b.a,{size:80,mode:"image",src:t.items[e].item.image_url||void 0}),header:t.items[e].item.name,subheader:"".concat(n.price," \u0440\u0443\u0431 ").concat(n.sale?n.sale:""),asideMode:"dismiss",actions:Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("div",{style:{display:"flex"},children:s(t.items[e].item.elements,Number(e))}),Object(_.jsxs)("div",{style:{display:"flex",bottom:0},children:[Object(_.jsx)(b.c,{mode:"overlay_outline",onClick:function(){return c(t.items[e].item)},size:"m",style:{float:"left",margin:5,color:"#482d06"},children:"-1"}),Object(_.jsx)("span",{style:{margin:"auto",fontSize:25,fontWeight:"bold"},children:t.items[e].count}),Object(_.jsx)(b.c,{mode:"overlay_outline",onClick:function(){return r(t.items[e].item)},size:"m",style:{float:"left",margin:5,color:"#482d06"},children:"+1"})]})]}),onDismiss:function(){return a(t.items[e].item)}},e),Object(_.jsx)(b.y,{})]},e))};for(var l in t.items)u(l);return Object(_.jsx)("div",{children:o})},X=n.p+"static/media/pay.c8dfba86.png",$=function(e){var t=e.typeDelivery,n=e.order,i=e.clearCart,a=Object(c.useRef)(null),o=Object(c.useState)(null),s=Object(j.a)(o,2),d=s[0],h=s[1],m=Object(c.useState)(""),O=Object(j.a)(m,2),p=O[0],x=O[1],g=Object(c.useState)(""),v=Object(j.a)(g,2),y=v[0],k=v[1],w=Object(c.useState)(""),S=Object(j.a)(w,2),C=S[0],P=S[1],E=Object(c.useState)(null),z=Object(j.a)(E,2),I=z[0],T=z[1],D=Object(f.c)((function(e){return e.deliveryInfo})),A=Object(f.c)((function(e){return e.vkParams})),F=Object(c.useMemo)((function(){return D?t===r.SDEK?Math.round(Number(D.sdek.price)):Math.round(D.PR.price):0}),[D,t]),M=Object(c.useMemo)((function(){return D?t===r.SDEK?"".concat(D.sdek.deliveryPeriodMin," - ").concat(D.sdek.deliveryPeriodMax," \u0434\u043d."):D.PR.deliveryDateMax:""}),[D,t]),R=Object(c.useMemo)((function(){return n.meta.sum+F}),[F,n]),N=function(e){var t;return null===e||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.map((function(e){return V[e.property_id]?"".concat(V[e.property_id].title," - ").concat(e.value):""})).join("")},K=function(){var e=Object(l.a)(u.a.mark((function e(c){var i,a,o,s,l,d,j,m,f,O,x,g,v,k;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),e.prev=1,""!==p){e.next=4;break}throw Error("\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u044b \u0424\u0418\u041e \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044f \u043f\u043e\u0441\u044b\u043b\u043a\u0438");case 4:if(""!==C){e.next=6;break}throw Error("\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430");case 6:if(""!==y){e.next=8;break}throw Error("\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d \u0430\u0434\u0440\u0435\u0441 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438");case 8:for(a in i="",n.items)o=n.items[a].item.elements.filter((function(e){return!0===e.active})),s=N(o[0]),i+="".concat(n.items[a].item.name,". \u0428\u0442\u0443\u043a - ").concat(n.items[a].count,". ").concat(s,". ");for(m in l=Date.now(),d={},j={},n.items)f=n.items[m].item.elements.filter((function(e){return!0===e.active})),O=N(f[0]),j[m]="".concat(n.items[m].item.name,". \u0428\u0442\u0443\u043a - ").concat(n.items[m].count,". ").concat(O);return d.order=j,d.info={amount:n.meta.sum,count:n.meta.count,weight:n.meta.weight,typeDelivery:t===r.SDEK?"\u0421\u0434\u044d\u043a":"\u041f\u043e\u0447\u0442\u0430 \u0420\u043e\u0441\u0441\u0438\u0438",activePVZ:"\u0414\u043e\u043c\u043e\u0439",orderNum:l,date:l},d.contacts={address:y,phone:C,name:p},x={merchant:"57170613-71d8-444e-8b69-8253749eee13",amount:String(Math.round(R)),custom_order_id:l.toString(),description:i.toString(),unix_timestamp:String(Math.floor(Date.now()/1e3)).toString(),salt:"dPUTLtbMfcTGzkaBnGtseKlcQymCLrYI",callback_url:"https://saharnypossum.herokuapp.com/pay/modulbankcallback/"},g={sum:Math.round(R),user:Number(A.vk_user_id),num:l,jsonParams:d,params:A},e.next=21,fetch("https://saharnypossum.herokuapp.com/pay/modulbank",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify({order:g,payData:x})});case 21:return v=e.sent,e.next=24,v.json();case 24:if(k=e.sent){e.next=27;break}throw Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e\u0442 \u0431\u0430\u043d\u043a\u0430");case 27:k.error&&h(Object(_.jsx)(b.z,{onClose:function(){return h(null)},children:k.error})),T(k.paylink),e.next=34;break;case 31:e.prev=31,e.t0=e.catch(1),h(Object(_.jsx)(b.z,{layout:"vertical",onClose:function(){return h(null)},children:e.t0.message}));case 34:case"end":return e.stop()}}),e,null,[[1,31]])})));return function(t){return e.apply(this,arguments)}}();return D?Object(_.jsxs)("div",{children:[Object(_.jsx)(b.s,{before:null,style:{paddingTop:10},after:Object(_.jsxs)(b.i,{children:[F," \u0440\u0443\u0431."]}),children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438"}),Object(_.jsx)(b.s,{before:null,after:M,children:"\u0421\u0440\u043e\u043a \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438:"}),Object(_.jsxs)(b.s,{before:null,after:R,children:["\u0418\u0442\u043e\u0433\u043e \u043a \u043e\u043f\u043b\u0430\u0442\u0435:"," "]}),Object(_.jsxs)(b.m,{children:[Object(_.jsx)(b.q,{value:p,onChange:function(e){return x(e.target.value)},top:"\u041f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044c (\u0424\u0418\u041e)"}),Object(_.jsx)(b.q,{value:C,onChange:function(e){return P(e.target.value)},top:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),Object(_.jsx)(b.q,{value:y,onChange:function(e){return k(e.target.value)},top:"\u0410\u0434\u0440\u0435\u0441\u0441 (\u041e\u0431\u043b., \u0433\u043e\u0440\u043e\u0434, \u0443\u043b\u0438\u0446\u0430, \u0434\u043e\u043c, \u043a\u0432.)"})]}),Object(_.jsx)(b.j,{children:I?Object(_.jsx)("a",{target:"_blank",ref:a,id:"payLink",href:I||void 0,onClick:i,rel:"noreferrer",children:Object(_.jsxs)("div",{style:{textAlign:"center",color:"antiquewhite",background:"rgb(0 0 0 / 9%)",borderRadius:10},children:["\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043f\u043e\u0441\u043e\u0431 \u043e\u043f\u043b\u0430\u0442\u044b",Object(_.jsx)("img",{style:{width:"100%"},src:X,alt:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043e\u043f\u043b\u0430\u0442\u0435"})]})}):Object(_.jsx)(b.c,{onClick:K,mode:"outline",size:"xl",children:"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c ".concat(Math.round(R)," \u0440\u0443\u0431.")})}),d]}):Object(_.jsx)(b.A,{})};!function(e){e[e.SDEK=0]="SDEK",e[e.POST_RUSSIA=1]="POST_RUSSIA"}(r||(r={}));var ee=function(e){var t=e.order,n=e.clearCart,i=Object(f.b)(),a=Object(f.c)((function(e){return e.deliveryCity})),o=Object(c.useState)(r.SDEK),s=Object(j.a)(o,2),u=s[0],l=s[1],d=Object(c.useCallback)((function(){a&&fetch("https://saharnypossum.herokuapp.com/items/getRange",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify({cityCode:a.id,weight:String(t.meta.weight),count:t.meta.count,typeDelivery:"137",postal:a.postal})}).then((function(e){return e.json()})).then((function(e){i({type:g,payload:e})})).catch((function(e){console.log(e)}))}),[t.meta,a,i]);return Object(c.useEffect)((function(){a&&d()}),[u,d,a]),a?Object(_.jsxs)(b.j,{children:[Object(_.jsxs)(b.B,{children:[Object(_.jsx)(b.C,{onClick:function(){return l(r.SDEK)},selected:u===r.SDEK,children:"\u0421\u0414\u042d\u041a"}),Object(_.jsx)(b.C,{onClick:function(){return l(r.POST_RUSSIA)},selected:u===r.POST_RUSSIA,children:"\u041f\u043e\u0447\u0442\u0430 \u0420\u043e\u0441\u0441\u0438\u0438"})]}),Object(_.jsx)($,{typeDelivery:u,order:t,clearCart:n})]}):null},te=function(e){var t=e.id,n=e.go,r=e.goBack,i=Object(c.useState)(null),a=Object(j.a)(i,2),o=a[0],s=a[1],d=Object(c.useState)(!0),h=Object(j.a)(d,2),O=h[0],p=h[1],x=Object(f.c)((function(e){return e.deliveryCity})),g=U(),v=g.order,y=g.message,k=g.changeElementVariant,w=g.onIncrementPosition,S=g.onDecrementPosition,C=g.onDeletePosition,P=g.clearCart,E=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.send("VKWebAppAllowMessagesFromGroup",{group_id:34022993,key:"dBuBKe1kFcdemzB"});case 2:(t=e.sent).result||p(!1),p(t.result);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){E()}),[]),Object(c.useEffect)((function(){y&&s(Object(_.jsx)(b.z,{layout:"vertical",onClose:function(){return s(null)},children:y}))}),[y]),0===v.meta.count?Object(_.jsxs)(b.t,{id:t,children:[Object(_.jsx)(b.u,{left:Object(_.jsx)(b.v,{onClick:r})}),Object(_.jsx)(b.g,{expandable:!0,onClick:function(){return n("userOrders")},children:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b"}),!O&&Object(_.jsx)(b.j,{children:Object(_.jsx)(b.c,{align:"center",onClick:E,children:"\u0425\u043e\u0447\u0443 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0442\u0440\u0435\u043a-\u043a\u043e\u0434 \u0432 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0438"})}),Object(_.jsx)(b.w,{icon:Object(_.jsx)(H.a,{}),header:"\u0412\u0430\u0448\u0430 \u043a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430",action:Object(_.jsx)(b.c,{onClick:r,mode:"outline",size:"l",children:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u043f\u043e\u043a\u0443\u043f\u043a\u0438"})}),Object(_.jsx)(b.l,{})]}):Object(_.jsxs)(b.t,{id:t,children:[Object(_.jsx)(b.u,{left:Object(_.jsx)(b.v,{onClick:function(){return n("home")}})}),Object(_.jsx)(b.g,{expandable:!0,onClick:function(){return n("userOrders")},children:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b"}),!O&&Object(_.jsx)(b.j,{children:Object(_.jsx)(b.c,{align:"center",onClick:E,children:"\u0425\u043e\u0447\u0443 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0442\u0440\u0435\u043a-\u043a\u043e\u0434 \u0432 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0438"})}),Object(_.jsx)(Q,{order:v,changeElementVariant:k,onIncrementPosition:w,onDecrementPosition:S,onDeletePosition:C}),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)(b.j,{children:[Object(_.jsx)(b.s,{before:null,after:Object(_.jsx)(b.i,{children:v.meta?v.meta.count:0}),children:"\u0422\u043e\u0432\u0430\u0440\u043e\u0432 (\u0448\u0442\u0443\u043a\u0438)"}),Object(_.jsx)(b.s,{before:null,after:Object(_.jsx)(b.i,{children:v.meta?v.meta.sum:0}),children:"\u0421\u0443\u043c\u043c\u0430 (\u0440\u0443\u0431\u043b\u0438)"})]}),Object(_.jsxs)(b.n,{header:Object(_.jsx)(b.o,{mode:"secondary",children:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430"}),children:[Object(_.jsx)(b.g,{expandable:!0,onClick:function(){return n("cityList")},indicator:x?x.name:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e",children:"\u0413\u043e\u0440\u043e\u0434 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438"}),Object(_.jsx)(ee,{order:v,clearCart:P})]})]}),Object(_.jsx)(b.l,{}),o]})},ne=function(e){var t=e.id,n=e.go,r=e.activeItem,i=Object(c.useState)(null),a=Object(j.a)(i,2),o=a[0],s=a[1],u=U(),l=u.onIncrementPosition,d=u.message,h=u.order;return Object(c.useEffect)((function(){d&&s(Object(_.jsx)(b.z,{layout:"vertical",onClose:function(){return s(null)},children:d}))}),[d]),r?Object(_.jsxs)(b.t,{id:t,children:[Object(_.jsx)(b.u,{left:Object(_.jsx)(b.v,{onClick:function(){return n("category")}})}),Object(_.jsx)(P,{go:n,order:h}),Object(_.jsx)(b.n,{style:{paddingTop:50},title:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0442\u043e\u0432\u0430\u0440\u0435",children:r.image_url&&Object(_.jsx)("img",{style:{width:"100%"},src:r.image_url,alt:"\u0424\u043e\u0442\u043e \u0442\u043e\u0432\u0430\u0440\u0430"})}),Object(_.jsx)(b.e,{children:Object(_.jsxs)(b.f,{children:[Object(_.jsx)(b.e,{size:"l",children:Object(_.jsxs)(b.j,{style:{backgroundColor:"#03825e",borderRadius:10,color:"antiquewhite"},children:[Object(_.jsx)(b.s,{textWrap:"full",before:null,children:Object(_.jsx)(b.D,{level:"1",weight:"semibold",style:{marginBottom:16},children:r.name})}),B(r.elements)]})}),Object(_.jsx)(b.e,{size:"l",children:Object(_.jsx)(b.c,{size:"xl",onClick:function(){return l(r)},mode:"commerce",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"})}),Object(_.jsx)(b.e,{size:"l",children:Object(_.jsx)(b.j,{style:{backgroundColor:"#03825e",borderRadius:10,color:"antiquewhite"},children:r.detail})})]})}),Object(_.jsx)(b.l,{}),o]}):null},re=function(e){var t=e.id,n=e.goBack,r=Object(f.b)(),i=Object(c.useState)([]),a=Object(j.a)(i,2),o=a[0],s=a[1],u=Object(c.useState)(""),l=Object(j.a)(u,2),d=l[0],h=l[1],m=Object(c.useState)(!1),O=Object(j.a)(m,2),p=O[0],g=O[1],v=function(e){r(function(e){return{type:x,payload:e}}(e)),n()},y=Object(c.useCallback)((function(){g(!0),fetch("https://sahpossum.herokuapp.com/items/getCities/"+d).then((function(e){return e.json()})).then((function(e){s(e),g(!1)})).catch((function(e){console.log(e),g(!1)}))}),[d]);return Object(c.useEffect)((function(){y()}),[y]),Object(_.jsxs)(b.t,{id:t,children:[Object(_.jsx)(b.u,{left:Object(_.jsx)(b.v,{onClick:function(){return n()}})}),Object(_.jsx)(b.m,{children:Object(_.jsx)(b.q,{top:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u043b\u043d\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u043e\u0440\u043e\u0434\u0430",value:d,onChange:function(e){return h(e.target.value)}})}),p?Object(_.jsx)(b.A,{}):Object(_.jsx)(_.Fragment,{children:o.map((function(e){return Object(_.jsx)(b.g,{multiline:!0,onClick:function(){return v(e)},description:e.region||"",children:e.name},e.id)}))}),Object(_.jsx)(b.l,{})]})},ce=n(36),ie=n.n(ce),ae=function(e){var t=[];for(var n in e)t.push(Object(_.jsx)(b.s,{before:null,textWrap:"full",children:e[n]},n));return t},oe=function(e,t){switch(e){case"activePVZ":return Object(_.jsx)(b.p,{header:"\u041f\u0443\u043d\u043a\u0442 \u0432\u044b\u0434\u0430\u0447\u0438",children:t});case"amount":return Object(_.jsx)(b.p,{header:"\u0421\u0443\u043c\u043c\u0430 \u0437\u0430\u043a\u0430\u0437\u0430",children:t});case"count":return Object(_.jsx)(b.p,{header:"\u0412\u0441\u0435\u0433\u043e \u0442\u043e\u0432\u0430\u0440\u043e\u0432",children:t});case"orderNum":return Object(_.jsx)(b.p,{header:"\u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u043a\u0430\u0437\u0430",children:t});case"date":return Object(_.jsx)(b.p,{header:"\u0414\u0430\u0442\u0430",children:ie()(t).locale("ru").format("MMMM Do YYYY, h:mm:ss a")});case"typeDelivery":return Object(_.jsx)(b.p,{header:"\u0422\u0438\u043f \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438",children:t});case"weight":return Object(_.jsxs)(b.p,{header:"\u0412\u0435\u0441",children:[Math.round(Number(t))," \u043a\u0433"]});default:return null}},se=function(e){var t=[];for(var n in e)t.push(oe(n,e[n]));return t},ue=function(e){var t=e.go,n=e.id,r=(e.fetchedUser,function(){var e=Object(c.useState)(null),t=Object(j.a)(e,2),n=t[0],r=t[1];Object(c.useEffect)((function(){fetch("https://saharnypossum.herokuapp.com/pay/orders",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({})}).then((function(e){return e.json()})).then((function(e){r(e)}))}),[]);var i=function(){var e=Object(l.a)(u.a.mark((function e(t,c){var i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===n||void 0===n?void 0:n.map((function(e){if(e._id===t._id){var n=Object(N.a)({},e);return n.status=c,n}return e}));case 2:i=e.sent,r(i||[]);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a=function(){var e=Object(l.a)(u.a.mark((function e(t,c){var i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===n||void 0===n?void 0:n.map((function(e){if(e._id===t._id){var n=Object(N.a)({},e);return n.track=c,console.log(n),n}return e}));case 2:i=e.sent,r(i||[]);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return{arrOrders:n,changeStatus:i,changeTrack:a,changeOrder:function(e){var t=null===n||void 0===n?void 0:n.find((function(t){return t._id===e._id}));t&&fetch("https://saharnypossum.herokuapp.com/pay/orders",{method:"PATCH",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({_id:t._id,status:t.status,track:t.track,userId:String(t.user),key:",NbOWn4M_2pKBccO"})}).then((function(e){return e.json()})).then((function(e){return console.log(e)}))}}}()),i=r.arrOrders,a=r.changeTrack,o=r.changeStatus,s=r.changeOrder;return Object(_.jsxs)(b.t,{id:n,children:[Object(_.jsx)(b.u,{left:Object(_.jsx)(b.v,{onClick:function(){return t("home")}})}),Object(_.jsx)(b.f,{style:{padding:10},children:null===i||void 0===i?void 0:i.map((function(e){return Object(_.jsx)(b.e,{style:{paddingTop:8,borderRadius:13,margin:"0 0 20px 0",backgroundColor:"#007151",boxShadow:"inset 2px 2px 5px rgb(226 191 157 / 50%), 1px 1px 5px rgb(255 255 255)"},mode:"shadow",size:"l",children:Object(_.jsxs)(b.j,{children:[ae(e.jsonParams.order),se(e.jsonParams.info),Object(_.jsx)(b.p,{header:"\u0422\u0440\u0435\u043a",children:Object(_.jsx)(b.q,{defaultValue:e.track,onChange:function(t){return a(e,t.target.value)}})}),e.jsonParams.contacts&&Object(_.jsxs)(b.n,{title:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b",children:[Object(_.jsx)(b.p,{header:"\u0410\u0434\u0440\u0435\u0441",children:e.jsonParams.contacts.address}),Object(_.jsx)(b.p,{header:"\u0418\u043c\u044f",children:e.jsonParams.contacts.name}),Object(_.jsx)(b.p,{header:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",children:e.jsonParams.contacts.phone}),Object(_.jsx)(b.p,{header:"\u0412\u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0435",children:Object(_.jsx)("a",{href:"https://vk.com/id"+e.user,children:"https://vk.com/id"+e.user})})]}),Object(_.jsxs)(b.x,{top:"\u0421\u0442\u0430\u0442\u0443\u0441",defaultValue:e.status,onChange:function(t){return o(e,t.target.value)},children:[Object(_.jsx)("option",{value:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d",children:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d"}),Object(_.jsx)("option",{value:"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d"}),Object(_.jsx)("option",{value:"\u041e\u0442\u043c\u0435\u043d\u0435\u043d",children:"\u041e\u0442\u043c\u0435\u043d\u0435\u043d"})]}),Object(_.jsx)(b.j,{children:Object(_.jsx)(b.c,{size:"m",stretched:!0,mode:"outline",onClick:function(){return s(e)},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})})}))})]})},le=n(128),de=n(129),je=n(130),be=function(e){var t=e.id,n=e.goBack,r=Object(f.c)((function(e){return e.vkParams})),i=Object(c.useState)(null),a=Object(j.a)(i,2),o=a[0],s=a[1],u=Object(c.useState)(null),l=Object(j.a)(u,2),d=l[0],h=l[1];return Object(c.useEffect)((function(){fetch("https://saharnypossum.herokuapp.com/pay/getAllOrders",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify({params:r})}).then((function(e){return e.json()})).then((function(e){e.error?s(Object(_.jsx)(b.z,{layout:"vertical",onClose:function(){return s(null)},children:'"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"'})):h(e||[])}))}),[r]),Object(_.jsxs)(b.t,{id:t,children:[Object(_.jsx)(b.u,{left:Object(_.jsx)(b.v,{onClick:n})}),Object(_.jsx)(me,{allOrders:d,goBack:n}),Object(_.jsx)(b.l,{}),o]})},he=function(e){switch(e){case"\u041e\u043f\u043b\u0430\u0447\u0435\u043d":case"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d":return Object(_.jsx)(le.a,{});default:return Object(_.jsx)(de.a,{})}},me=function(e){var t=e.allOrders,n=e.goBack;return t?0===t.length?Object(_.jsx)(b.w,{stretched:!0,icon:Object(_.jsx)(je.a,{}),header:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u0442\u0435\u043a\u0443\u0449\u0438\u0445 \u0434\u043e\u0441\u0442\u0430\u0432\u043e\u043a",action:Object(_.jsx)(b.c,{onClick:n,mode:"outline",size:"l",children:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u043f\u043e\u043a\u0443\u043f\u043a\u0438"})}):Object(_.jsx)("div",{children:t.map((function(e,t){return Object(_.jsxs)(b.g,{multiline:!0,description:e.track?"\u0422\u0440\u0435\u043a-\u043d\u043e\u043c\u0435\u0440: "+e.track:"\u0417\u0430\u043a\u0430\u0437 \u0435\u0449\u0435 \u043d\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d",children:[Object(_.jsx)(b.s,{textWrap:"full",before:he(e.status),children:"[".concat((n=e.status,"\u0412 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0435"===n?"\u041d\u0435 \u043e\u043f\u043b\u0430\u0447\u0435\u043d":n),"] - ")+"\u0417\u0430\u043a\u0430\u0437 \u2116".concat(e.num," (").concat(e.sum,"\u0440\u0443\u0431.)")}),e.jsonParams.order&&Object.keys(e.jsonParams.order).map((function(t,n){return Object(_.jsx)(b.p,{header:e.jsonParams.order[Number(t)]},n)}))]},t);var n}))}):Object(_.jsx)(b.w,{stretched:!0,icon:Object(_.jsx)(je.a,{}),header:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"})},fe=function(e){var t=e.params;ie.a.locale("ru");var n=Object(f.b)(),r=Object(c.useState)("home"),i=Object(j.a)(r,2),a=i[0],o=i[1],s=Object(c.useState)(null),h=Object(j.a)(s,2),O=h[0],p=h[1],x=Object(c.useState)(["home"]),g=Object(j.a)(x,2),k=g[0],w=g[1],S=Object(c.useState)(null),C=Object(j.a)(S,2),P=C[0],E=C[1],z=Object(c.useState)(null),I=Object(j.a)(z,2),T=I[0],D=I[1];Object(c.useEffect)((function(){n(function(e){return{type:v,payload:e}}(t))}),[n,t]);var A=Object(c.useCallback)((function(e){var t=Object(d.a)(k);t.push(e),w(t),o(e)}),[k]),F=Object(c.useCallback)((function(){var e=Object(d.a)(k);1===e.length?m.a.send("VKWebAppClose",{status:"success"}):(e.pop(),w(e),o(e[e.length-1]))}),[k]);return Object(c.useEffect)((function(){function e(){return(e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,E(t),p(null);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=Object(l.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://zoomagasin.ru/api/api.php?route=sections");case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,n(y(r.items));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),function(){t.apply(this,arguments)}(),window.onpopstate=function(){F()}}),[n,F]),Object(_.jsx)(b.h,{children:Object(_.jsxs)(b.E,{activePanel:a,popout:O,history:k,children:[Object(_.jsx)(L,{id:"home",go:A,fetchedUser:P}),Object(_.jsx)(G,{id:"category",go:A,setActiveProduct:D}),Object(_.jsx)(ne,{id:"aboutProduct",go:A,activeItem:T}),Object(_.jsx)(te,{id:"cart",go:A,goBack:F}),Object(_.jsx)(re,{id:"cityList",goBack:F}),Object(_.jsx)(ue,{go:A,id:"adminOrders",fetchedUser:P}),Object(_.jsx)(be,{id:"userOrders",goBack:F})]})})},Oe=n(59),pe={categories:null,targetCategory:null,deliveryCity:null,deliveryInfo:null,vkParams:null},xe=Object(Oe.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(N.a)(Object(N.a)({},e),{},{categories:t.payload});case p:return Object(N.a)(Object(N.a)({},e),{},{targetCategory:t.payload});case x:return Object(N.a)(Object(N.a)({},e),{},{deliveryCity:t.payload});case g:return Object(N.a)(Object(N.a)({},e),{},{deliveryInfo:t.payload});case v:return Object(N.a)(Object(N.a)({},e),{},{vkParams:t.payload});default:return e}}));m.a.send("VKWebAppInit");var ge=window.location.hash.replace("#","").split("&").reduce((function(e,t){var n=t.split("=");return e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]),e}),{}),ve=window.location.search.replace("?","").split("&").reduce((function(e,t){var n=t.split("=");return e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]),e}),{});o.a.render(Object(_.jsx)(f.a,{store:xe,children:Object(_.jsx)(i.a.StrictMode,{children:Object(_.jsx)(fe,{linkParams:ge,params:ve})})}),document.getElementById("root"))},26:function(e,t,n){}},[[126,1,2]]]);
//# sourceMappingURL=main.a08fba89.chunk.js.map